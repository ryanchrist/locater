# Introduction

`locater` is an R package for testing tree structures (represented via discrete and/or via relatedness matrices) for association with traits of interest. Please see our pre-print describing the underlying LOCATER methodology here: https://www.biorxiv.org/content/10.1101/2024.09.30.615852 .

While `locater` natively interacts with the local ancestry inference software package `kalis`, available here https://github.com/louisaslett/kalis/, the package exports functions exposing all internal testing routines so that LOCATER may be used in conjunction with other local genealogy inference software without requiring the user to re-implement those core testing routines. The exported function `TestLoci` is a wrapper function used for testing target variants along a chromosome; it provides a template for users hoping to adapt `locater` to use a different ancestry inference engine or otherwise customize the testing routine.


# Installation Instructions

## Install R 
If not already installed, please visit https://posit.co/download/rstudio-desktop/ for guidance. Once R is installed, we suggest installing them in the order below by copying and pasting the following R commands into R.

## Install `kalis`
Our default ancestry inference engine `kalis` may be installed from our [public Github repository](https://github.com/louisaslett/kalis/) as follows.

```
if(!require("BiocManager", quietly = TRUE)){install.packages("BiocManager")}
BiocManager::install("rhdf5") # a suggested dependency for kalis that will be required for running locater

install.packages("remotes")
remotes::install_github("louisaslett/kalis",
  configure.vars = c(kalis = "PKG_CFLAGS='-march=native -mtune=native -O3'"))
if(!require(kalis)){stop("kalis was not properly installed")}
```

## Install Dependencies and `locater` from out public r-universe respository

```{r install_from_r_universe,eval=FALSE}
install.packages("QForm", repos = "https://ryanchrist.r-universe.dev")
if(!require(QForm)){stop("Qform was not properly installed")}

install.packages("renyi", repos = "https://ryanchrist.r-universe.dev")
if(!require(renyi)){stop("renyi was not properly installed")}

install.packages("locater", repos = "https://ryanchrist.r-universe.dev")
if(!require(locater)){stop("locater was not properly installed")}
```

# Vignette
Please see the package vignette in `vignettes/simple_locater_example.Rmd` and viewable at https://ryanchrist.r-universe.dev/articles/locater/simple_locater_example.html for a simple example deploying `locater` and a demonstration of how the `locater` package API can be used to test inferred clades and relatedness matrices generated by other ancestry inference methods.
